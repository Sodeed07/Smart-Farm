<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soil Analysis & Government Schemes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .feature-card {
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .upload-zone {
            transition: all 0.3s ease;
        }
        .upload-zone:hover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center space-x-3">
                <div class="text-3xl">üå±</div>
                <h1 class="text-2xl font-bold">Smart Farm - Soil Analysis & Government Schemes</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">üå°Ô∏è Soil Analysis & Government Schemes</h2>
            <p class="text-gray-600">Get AI-powered soil recommendations and discover government support programs</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Soil Analysis Section -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üß™ Soil Health Dashboard</h3>
                
                <!-- Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <div class="bg-gradient-to-br from-blue-400 to-blue-600 text-white rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-2xl">üíß</span>
                            <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Good</span>
                        </div>
                        <h4 class="font-semibold mb-1">Moisture</h4>
                        <div class="text-2xl font-bold">45%</div>
                        <div class="text-blue-100 text-sm">Optimal range: 40-60%</div>
                    </div>

                    <div class="bg-gradient-to-br from-green-400 to-green-600 text-white rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-2xl">‚öñÔ∏è</span>
                            <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Good</span>
                        </div>
                        <h4 class="font-semibold mb-1">pH Level</h4>
                        <div class="text-2xl font-bold">6.8</div>
                        <div class="text-green-100 text-sm">Slightly acidic</div>
                    </div>

                    <div class="bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-2xl">‚ö°</span>
                            <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Moderate</span>
                        </div>
                        <h4 class="font-semibold mb-1">Conductivity</h4>
                        <div class="text-2xl font-bold">2.1</div>
                        <div class="text-yellow-100 text-sm">dS/m</div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-400 to-purple-600 text-white rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-2xl">üå±</span>
                            <span class="bg-white bg-opacity-20 px-2 py-1 rounded text-xs">Low</span>
                        </div>
                        <h4 class="font-semibold mb-1">Organic Matter</h4>
                        <div class="text-2xl font-bold">1.8%</div>
                        <div class="text-purple-100 text-sm">Needs improvement</div>
                    </div>
                </div>

                <!-- Nutrient Analysis -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Primary Nutrients -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-4">üî¥ Primary Nutrients (NPK)</h4>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Nitrogen (N)</span>
                                    <span class="text-sm text-gray-600">280 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-red-500 h-2 rounded-full" style="width: 70%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Promotes leaf growth and chlorophyll production</p>
                            </div>

                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Phosphorus (P)</span>
                                    <span class="text-sm text-gray-600">45 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-orange-500 h-2 rounded-full" style="width: 45%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Essential for root development and flowering</p>
                            </div>

                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Potassium (K)</span>
                                    <span class="text-sm text-gray-600">320 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Improves disease resistance and water regulation</p>
                            </div>
                        </div>
                    </div>

                    <!-- Secondary Nutrients -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-4">üü° Secondary Nutrients</h4>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Calcium (Ca)</span>
                                    <span class="text-sm text-gray-600">1850 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Strengthens cell walls and improves soil structure</p>
                            </div>

                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Magnesium (Mg)</span>
                                    <span class="text-sm text-gray-600">180 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-teal-500 h-2 rounded-full" style="width: 60%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Central component of chlorophyll molecule</p>
                            </div>

                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium">Sulfur (S)</span>
                                    <span class="text-sm text-gray-600">25 mg/kg</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 40%"></div>
                                </div>
                                <p class="text-xs text-gray-600">Important for protein synthesis and oil formation</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pathogenicity Alert -->
                <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6">
                    <div class="flex items-center">
                        <span class="text-2xl mr-3">‚ö†Ô∏è</span>
                        <div class="flex-1">
                            <h4 class="font-semibold text-red-800">Pathogenicity Alert</h4>
                            <p class="text-red-700 text-sm mt-1">
                                <strong>Pathogen Count:</strong> 2.3 √ó 10‚Åµ CFU/g soil
                            </p>
                            <p class="text-red-700 text-sm mt-1">
                                <strong>Recommendation:</strong> Apply bio-fungicide treatment before planting. Consider soil sterilization for sensitive crops.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Weather Integration -->
                <div class="bg-blue-50 rounded-lg p-4 mb-6">
                    <h4 class="font-semibold text-blue-800 mb-3">üå§Ô∏è Current Weather Conditions</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="text-center">
                            <span class="text-3xl">‚òÄÔ∏è</span>
                            <div class="font-bold text-blue-800">28¬∞C</div>
                            <div class="text-sm text-blue-600">Temperature</div>
                        </div>
                        <div class="text-center">
                            <span class="text-3xl">üíß</span>
                            <div class="font-bold text-blue-800">65%</div>
                            <div class="text-sm text-blue-600">Humidity</div>
                        </div>
                        <div class="text-center">
                            <span class="text-3xl">üå¨Ô∏è</span>
                            <div class="font-bold text-blue-800">12 km/h</div>
                            <div class="text-sm text-blue-600">Wind Speed</div>
                        </div>
                    </div>
                </div>

                <!-- Crop Recommendation System -->
                <div class="bg-green-50 rounded-lg p-4 mb-6">
                    <h4 class="font-semibold text-green-800 mb-4">üåæ Smart Crop Recommendations</h4>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-green-800 mb-2">Select Desired Crop:</label>
                        <select id="cropSelect" class="w-full border border-green-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="">Choose a crop...</option>
                            <option value="wheat">üåæ Wheat</option>
                            <option value="rice">üåæ Rice</option>
                            <option value="corn">üåΩ Corn</option>
                            <option value="potato">ü•î Potato</option>
                            <option value="tomato">üçÖ Tomato</option>
                            <option value="cotton">üåø Cotton</option>
                            <option value="sugarcane">üéã Sugarcane</option>
                        </select>
                    </div>

                    <div id="cropRecommendation" class="hidden">
                        <div class="bg-white rounded-lg p-4 border border-green-200">
                            <h5 class="font-semibold text-green-800 mb-2">Soil Modifications Required:</h5>
                            <div id="modifications" class="space-y-2 mb-4">
                                <!-- Dynamic content will be inserted here -->
                            </div>
                            <button onclick="showDetailedPlan()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">Get Detailed Plan</button>
                        </div>
                    </div>

                    <div class="mt-4">
                        <h5 class="font-semibold text-green-800 mb-3">üå§Ô∏è Weather-Based Crop Recommendations:</h5>
                        <div class="bg-white rounded-lg p-4 border border-green-200 mb-4">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div class="bg-green-100 text-green-800 p-3 rounded-lg text-center">
                                    <div class="text-2xl mb-1">üåæ</div>
                                    <div class="font-semibold">Wheat</div>
                                    <div class="text-xs">Ideal for current weather</div>
                                    <div class="text-xs mt-1">Temp: Perfect | Humidity: Good</div>
                                </div>
                                <div class="bg-yellow-100 text-yellow-800 p-3 rounded-lg text-center">
                                    <div class="text-2xl mb-1">ü•î</div>
                                    <div class="font-semibold">Potato</div>
                                    <div class="text-xs">Good conditions</div>
                                    <div class="text-xs mt-1">Temp: Good | Humidity: Perfect</div>
                                </div>
                                <div class="bg-blue-100 text-blue-800 p-3 rounded-lg text-center">
                                    <div class="text-2xl mb-1">üåΩ</div>
                                    <div class="font-semibold">Corn</div>
                                    <div class="text-xs">Moderate suitability</div>
                                    <div class="text-xs mt-1">Temp: High | Humidity: Moderate</div>
                                </div>
                            </div>
                        </div>

                        <h5 class="font-semibold text-green-800 mb-3">üß™ Soil Report-Based Crop Recommendations:</h5>
                        <div class="bg-white rounded-lg p-4 border border-green-200">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border-l-4 border-green-500">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üåæ</span>
                                        <div>
                                            <div class="font-semibold text-green-800">Wheat</div>
                                            <div class="text-xs text-green-600">Excellent match for your soil conditions</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs font-semibold">95% Match</div>
                                        <div class="text-xs text-green-600 mt-1">pH: ‚úì NPK: ‚úì Moisture: ‚úì</div>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ü•î</span>
                                        <div>
                                            <div class="font-semibold text-blue-800">Potato</div>
                                            <div class="text-xs text-blue-600">Good soil compatibility</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="bg-blue-200 text-blue-800 px-2 py-1 rounded text-xs font-semibold">88% Match</div>
                                        <div class="text-xs text-blue-600 mt-1">pH: ‚úì Organic: ‚ö†Ô∏è Moisture: ‚úì</div>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üçÖ</span>
                                        <div>
                                            <div class="font-semibold text-yellow-800">Tomato</div>
                                            <div class="text-xs text-yellow-600">Requires soil amendments</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs font-semibold">72% Match</div>
                                        <div class="text-xs text-yellow-600 mt-1">pH: ‚úì P: ‚ö†Ô∏è Pathogen: ‚ùå</div>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border-l-4 border-red-500">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üåæ</span>
                                        <div>
                                            <div class="font-semibold text-red-800">Rice</div>
                                            <div class="text-xs text-red-600">Not recommended for current soil</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="bg-red-200 text-red-800 px-2 py-1 rounded text-xs font-semibold">45% Match</div>
                                        <div class="text-xs text-red-600 mt-1">Moisture: ‚ùå Pathogen: ‚ùå</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                                <h6 class="font-semibold text-gray-800 mb-2">üéØ Combined Weather + Soil Recommendation:</h6>
                                <div class="bg-gradient-to-r from-green-100 to-blue-100 p-3 rounded-lg border-2 border-green-300">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-3xl">üåæ</span>
                                        <div>
                                            <div class="font-bold text-green-800">WHEAT is your BEST choice!</div>
                                            <div class="text-sm text-green-700">Perfect weather conditions + Excellent soil match = Maximum yield potential</div>
                                            <div class="text-xs text-green-600 mt-1">Expected yield: 45-50 quintals/acre | Profit margin: High</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-blue-800 mb-2">üìÑ Upload New Soil Report</h4>
                    <div class="upload-zone border-2 border-dashed border-blue-300 rounded-lg p-8 text-center cursor-pointer" onclick="document.getElementById('fileInput').click()">
                        <div class="text-4xl mb-2">üìÑ</div>
                        <p class="text-blue-600 mb-3">Drag & drop your soil analysis report or click to browse</p>
                        <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Choose File</button>
                        <p class="text-xs text-blue-500 mt-2">Supported formats: PDF, JPG, PNG (Max 5MB)</p>
                        <input type="file" id="fileInput" class="hidden" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(event)">
                    </div>
                    <div id="uploadStatus" class="mt-3 hidden"></div>
                </div>
            </div>

            <!-- Government Schemes Section -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">üèõÔ∏è Government Schemes</h3>
                
                <div class="space-y-4">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 feature-card">
                        <h4 class="font-semibold text-blue-800">PM-KISAN Scheme</h4>
                        <p class="text-sm text-blue-700 mt-1 mb-2">Direct income support of ‚Çπ6,000 per year to farmer families</p>
                        <div class="text-xs text-blue-600 mb-3">
                            <span class="font-medium">Eligibility:</span> Small & marginal farmers with cultivable land
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="checkEligibility('pmkisan')" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">Check Eligibility</button>
                            <button onclick="applyScheme('pmkisan')" class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm hover:bg-blue-200">Apply Now</button>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border-l-4 border-green-400 p-4 feature-card">
                        <h4 class="font-semibold text-green-800">Soil Health Card Scheme</h4>
                        <p class="text-sm text-green-700 mt-1 mb-2">Free soil testing and nutrient management recommendations</p>
                        <div class="text-xs text-green-600 mb-3">
                            <span class="font-medium">Benefits:</span> Free soil testing every 2 years + fertilizer recommendations
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="applyScheme('soilhealth')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Apply Now</button>
                            <button onclick="learnMore('soilhealth')" class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm hover:bg-green-200">Learn More</button>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 feature-card">
                        <h4 class="font-semibold text-yellow-800">Pradhan Mantri Fasal Bima Yojana</h4>
                        <p class="text-sm text-yellow-700 mt-1 mb-2">Crop insurance against natural calamities and pest attacks</p>
                        <div class="text-xs text-yellow-600 mb-3">
                            <span class="font-medium">Premium:</span> 2% for Kharif, 1.5% for Rabi crops
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="getQuote('cropinsurance')" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">Get Quote</button>
                            <button onclick="learnMore('cropinsurance')" class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm hover:bg-yellow-200">Learn More</button>
                        </div>
                    </div>

                    <div class="bg-purple-50 border-l-4 border-purple-400 p-4 feature-card">
                        <h4 class="font-semibold text-purple-800">PM-KUSUM (Solar Pump Subsidy)</h4>
                        <p class="text-sm text-purple-700 mt-1 mb-2">Up to 90% subsidy on solar water pumps for irrigation</p>
                        <div class="text-xs text-purple-600 mb-3">
                            <span class="font-medium">Subsidy:</span> 30% Central + 30% State + 30% Bank loan
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="checkEligibility('solar')" class="bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700">Check Eligibility</button>
                            <button onclick="applyScheme('solar')" class="bg-purple-100 text-purple-800 px-3 py-1 rounded text-sm hover:bg-purple-200">Apply</button>
                        </div>
                    </div>

                    <div class="bg-teal-50 border-l-4 border-teal-400 p-4 feature-card">
                        <h4 class="font-semibold text-teal-800">National Agriculture Market (e-NAM)</h4>
                        <p class="text-sm text-teal-700 mt-1 mb-2">Online trading platform for agricultural commodities</p>
                        <div class="text-xs text-teal-600 mb-3">
                            <span class="font-medium">Benefits:</span> Better price discovery + Transparent bidding
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="registerEnam()" class="bg-teal-600 text-white px-3 py-1 rounded text-sm hover:bg-teal-700">Register</button>
                            <button onclick="learnMore('enam')" class="bg-teal-100 text-teal-800 px-3 py-1 rounded text-sm hover:bg-teal-200">Learn More</button>
                        </div>
                    </div>

                    <div class="bg-indigo-50 border-l-4 border-indigo-400 p-4 feature-card">
                        <h4 class="font-semibold text-indigo-800">Kisan Credit Card (KCC)</h4>
                        <p class="text-sm text-indigo-700 mt-1 mb-2">Easy credit access for farming and allied activities</p>
                        <div class="text-xs text-indigo-600 mb-3">
                            <span class="font-medium">Interest Rate:</span> 7% per annum (4% with prompt repayment)
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="applyKCC()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700">Apply KCC</button>
                            <button onclick="calculateCredit()" class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded text-sm hover:bg-indigo-200">Calculate Credit</button>
                        </div>
                    </div>
                </div>

                <!-- Scheme Status Tracker -->
                <div class="mt-6 bg-gray-50 rounded-lg p-4">
                    <h4 class="font-semibold text-gray-800 mb-3">üìä Your Application Status</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center p-2 bg-green-100 rounded">
                            <span class="text-sm text-green-800">PM-KISAN Application</span>
                            <span class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs">Approved</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-yellow-100 rounded">
                            <span class="text-sm text-yellow-800">Solar Pump Subsidy</span>
                            <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs">Under Review</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-blue-100 rounded">
                            <span class="text-sm text-blue-800">Soil Health Card</span>
                            <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded text-xs">Processing</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Detailed Plan -->
    <div id="detailedPlanModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-96 overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Detailed Farming Plan</h3>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                    </div>
                    <div id="detailedPlanContent">
                        <!-- Content will be dynamically inserted -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Crop recommendation system
        document.getElementById('cropSelect').addEventListener('change', function() {
            const selectedCrop = this.value;
            const recommendationDiv = document.getElementById('cropRecommendation');
            const modificationsDiv = document.getElementById('modifications');

            if (selectedCrop) {
                recommendationDiv.classList.remove('hidden');
                
                const cropData = {
                    wheat: {
                        modifications: [
                            { type: 'pH', text: 'Increase pH to 6.0-7.0 by adding lime (2-3 kg per acre)', color: 'yellow' },
                            { type: 'phosphorus', text: 'Add phosphorus fertilizer (DAP 50kg/acre)', color: 'orange' },
                            { type: 'organic', text: 'Increase organic matter with compost (500kg/acre)', color: 'green' }
                        ]
                    },
                    rice: {
                        modifications: [
                            { type: 'moisture', text: 'Maintain waterlogged conditions (2-5cm water)', color: 'blue' },
                            { type: 'nitrogen', text: 'Apply urea in split doses (120kg/acre)', color: 'red' },
                            { type: 'pathogen', text: 'Treat soil with bio-fungicide before transplanting', color: 'red' }
                        ]
                    },
                    corn: {
                        modifications: [
                            { type: 'nitrogen', text: 'Apply nitrogen fertilizer (150kg urea/acre)', color: 'red' },
                            { type: 'potassium', text: 'Maintain current potassium levels', color: 'green' },
                            { type: 'drainage', text: 'Ensure proper drainage to prevent waterlogging', color: 'blue' }
                        ]
                    },
                    potato: {
                        modifications: [
                            { type: 'pH', text: 'Maintain slightly acidic pH (5.5-6.5)', color: 'green' },
                            { type: 'organic', text: 'Add well-decomposed manure (1000kg/acre)', color: 'green' },
                            { type: 'pathogen', text: 'Apply neem cake to reduce pathogen load', color: 'yellow' }
                        ]
                    },
                    tomato: {
                        modifications: [
                            { type: 'calcium', text: 'Maintain current calcium levels for fruit quality', color: 'green' },
                            { type: 'phosphorus', text: 'Increase phosphorus for flowering (TSP 40kg/acre)', color: 'orange' },
                            { type: 'organic', text: 'Add vermicompost (300kg/acre)', color: 'green' }
                        ]
                    },
                    cotton: {
                        modifications: [
                            { type: 'potassium', text: 'Maintain high potassium for fiber quality', color: 'green' },
                            { type: 'boron', text: 'Apply boron fertilizer (1kg/acre)', color: 'purple' },
                            { type: 'drainage', text: 'Ensure good drainage and aeration', color: 'blue' }
                        ]
                    },
                    sugarcane: {
                        modifications: [
                            { type: 'nitrogen', text: 'Apply nitrogen in multiple splits (200kg/acre)', color: 'red' },
                            { type: 'moisture', text: 'Maintain consistent moisture levels', color: 'blue' },
                            { type: 'organic', text: 'Add press mud compost (2000kg/acre)', color: 'green' }
                        ]
                    }
                };

                const modifications = cropData[selectedCrop]?.modifications || [];
                modificationsDiv.innerHTML = modifications.map(mod => `
                    <div class="flex items-center space-x-3 p-2 bg-${mod.color}-50 rounded border-l-4 border-${mod.color}-400">
                        <span class="w-3 h-3 bg-${mod.color}-500 rounded-full"></span>
                        <span class="text-sm text-${mod.color}-800">${mod.text}</span>
                    </div>
                `).join('');
            } else {
                recommendationDiv.classList.add('hidden');
            }
        });

        // File upload handler
        function handleFileUpload(event) {
            const file = event.target.files[0];
            const statusDiv = document.getElementById('uploadStatus');
            
            if (file) {
                statusDiv.classList.remove('hidden');
                statusDiv.innerHTML = `
                    <div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded">
                        <div class="flex items-center">
                            <span class="mr-2">üìÑ</span>
                            <div>
                                <strong>Uploading:</strong> ${file.name}
                                <div class="text-sm">Processing soil analysis...</div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Simulate upload process
                setTimeout(() => {
                    statusDiv.innerHTML = `
                        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
                            <div class="flex items-center">
                                <span class="mr-2">‚úÖ</span>
                                <div>
                                    <strong>Upload Complete!</strong> Soil analysis updated.
                                    <div class="text-sm">New recommendations generated based on your report.</div>
                                </div>
                            </div>
                        </div>
                    `;
                }, 2000);
            }
        }

        // Government scheme functions
        function checkEligibility(scheme) {
            alert(`Checking eligibility for ${scheme}... You are eligible! Click Apply Now to proceed.`);
        }

        function applyScheme(scheme) {
            alert(`Redirecting to ${scheme} application portal...`);
        }

        function learnMore(scheme) {
            alert(`Opening detailed information about ${scheme}...`);
        }

        function getQuote(scheme) {
            alert('Calculating insurance premium based on your crop and area...');
        }

        function registerEnam() {
            alert('Redirecting to e-NAM registration portal...');
        }

        function applyKCC() {
            alert('Redirecting to Kisan Credit Card application...');
        }

        function calculateCredit() {
            alert('Opening credit limit calculator...');
        }

        // Detailed plan modal
        function showDetailedPlan() {
            const selectedCrop = document.getElementById('cropSelect').value;
            const modal = document.getElementById('detailedPlanModal');
            const content = document.getElementById('detailedPlanContent');
            
            if (selectedCrop) {
                content.innerHTML = `
                    <div class="space-y-4">
                        <h4 class="font-semibold text-lg">Complete ${selectedCrop.charAt(0).toUpperCase() + selectedCrop.slice(1)} Farming Plan</h4>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-800 mb-2">Pre-Planting (Week 1-2)</h5>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>‚Ä¢ Apply recommended soil amendments</li>
                                <li>‚Ä¢ Prepare seedbed with proper tillage</li>
                                <li>‚Ä¢ Install irrigation system if needed</li>
                            </ul>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-2">Planting (Week 3-4)</h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>‚Ä¢ Use certified seeds from authorized dealers</li>
                                <li>‚Ä¢ Follow recommended spacing and depth</li>
                                <li>‚Ä¢ Apply basal fertilizers as per soil test</li>
                            </ul>
                        </div>
                        
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-yellow-800 mb-2">Growth Period (Month 2-4)</h5>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>‚Ä¢ Monitor for pests and diseases</li>
                                <li>‚Ä¢ Apply fertilizers in split doses</li>
                                <li>‚Ä¢ Maintain optimal moisture levels</li>
                            </ul>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-purple-800 mb-2">Harvest (Month 4-5)</h5>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>‚Ä¢ Monitor crop maturity indicators</li>
                                <li>‚Ä¢ Plan harvest timing for best quality</li>
                                <li>‚Ä¢ Arrange storage and marketing</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-800 mb-2">Expected Returns</h5>
                            <div class="text-sm text-gray-700">
                                <p><strong>Investment:</strong> ‚Çπ25,000 - ‚Çπ30,000 per acre</p>
                                <p><strong>Expected Yield:</strong> 45-50 quintals per acre</p>
                                <p><strong>Market Price:</strong> ‚Çπ2,150 per quintal</p>
                                <p><strong>Gross Income:</strong> ‚Çπ96,750 - ‚Çπ1,07,500</p>
                                <p><strong>Net Profit:</strong> ‚Çπ66,750 - ‚Çπ82,500</p>
                            </div>
                        </div>
                    </div>
                `;
                modal.classList.remove('hidden');
            }
        }

        function closeModal() {
            document.getElementById('detailedPlanModal').classList.add('hidden');
        }

        // Close modal when clicking outside
        document.getElementById('detailedPlanModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98552eeb37419a8d',t:'MTc1ODkxNTEwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
